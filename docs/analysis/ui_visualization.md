# UI 更新可视化说明

## 主窗口布局变化

### 更新前
```
┌─────────────────────────────────────────────────────────┐
│ Coze剪映草稿生成器                                       │
├─────────────────────────────────────────────────────────┤
│ [云端服务] [脚本执行] [手动草稿生成（旧版）]              │
│                                                         │
│ ┌─ 输出设置 ─────────────────────────────────────────┐ │
│ │ 剪映草稿文件夹: [_______________] [选择] [自动检测] │ │
│ └───────────────────────────────────────────────────┘ │
│                                                         │
│ [标签页内容区域]                                        │
│                                                         │
├─────────────────────────────────────────────────────────┤
│ 日志面板                                                │
└─────────────────────────────────────────────────────────┘
```

### 更新后
```
┌─────────────────────────────────────────────────────────┐
│ Coze剪映草稿生成器                                       │
├─────────────────────────────────────────────────────────┤
│ ┌─ 全局草稿路径设置 ─────────────────────────────────┐ │
│ │ 剪映草稿文件夹: [_______________] [选择] [自动检测] │ │
│ │ ☑ 传输草稿到指定文件夹（启用后草稿将直接保存...）    │ │
│ │ 当前状态: 本地数据: C:\...\coze2jianying_data\drafts │ │
│ └───────────────────────────────────────────────────┘ │
│                                                         │
│ [云端服务] [脚本执行] [手动草稿生成（旧版）]              │
│                                                         │
│ [标签页内容区域 - 无文件夹选择UI]                       │
│                                                         │
├─────────────────────────────────────────────────────────┤
│ 日志面板                                                │
└─────────────────────────────────────────────────────────┘
```

## 关键UI变化

### 1. 全局路径设置面板（新增）
位置：标签页上方
```
┌─ 全局草稿路径设置 ────────────────────────────────────────────┐
│ 剪映草稿文件夹: [未选择                      ] [选择...] [自动检测] │
│                                                              │
│ ☑ 传输草稿到指定文件夹（启用后草稿将直接保存到剪映草稿文件夹， │
│                        否则保存在本地数据目录）               │
│                                                              │
│ 当前状态: 本地数据: C:\Users\...\coze2jianying_data\drafts   │
└──────────────────────────────────────────────────────────────┘
```

### 2. 手动草稿生成标签页（简化）

**更新前：**
```
┌─ 输出设置 ─────────────────────────────────────┐
│ 剪映草稿文件夹: [______] [选择] [自动检测]      │
└───────────────────────────────────────────────┘

输入内容:
┌─────────────────────────────────────────────┐
│                                             │
│  [JSON输入区域]                              │
│                                             │
└─────────────────────────────────────────────┘

[生成草稿] [清空]
```

**更新后：**
```
输入内容:
┌─────────────────────────────────────────────┐
│                                             │
│  [JSON输入区域]                              │
│                                             │
└─────────────────────────────────────────────┘

[生成草稿] [清空]
```

### 3. 云端服务标签页（简化）

**更新前：**
```
┌─ 服务说明 ─────────────────────────────────┐
│ 云端服务模式：启动 FastAPI 服务...          │
└───────────────────────────────────────────┘

┌─ 草稿文件夹设置 ───────────────────────────┐
│ 剪映草稿文件夹: [______] [选择] [自动检测]  │
└───────────────────────────────────────────┘

┌─ FastAPI 服务管理 ─────────────────────────┐
│ ...                                        │
└───────────────────────────────────────────┘
```

**更新后：**
```
┌─ 服务说明 ─────────────────────────────────┐
│ 云端服务模式：启动 FastAPI 服务...          │
│ 草稿输出路径由全局设置控制。                │
└───────────────────────────────────────────┘

┌─ FastAPI 服务管理 ─────────────────────────┐
│ ...                                        │
└───────────────────────────────────────────┘
```

### 4. 脚本执行标签页（简化）

**更新前：**
```
┌─ 输出设置 ─────────────────────────────────┐
│ 剪映草稿文件夹: [______] [选择] [自动检测]  │
└───────────────────────────────────────────┘

┌─ 脚本文件 ─────────────────────────────────┐
│ ...                                        │
└───────────────────────────────────────────┘
```

**更新后：**
```
┌─ 脚本文件 ─────────────────────────────────┐
│ ...                                        │
└───────────────────────────────────────────┘
```

## 状态显示示例

### 场景1：默认状态（未启用传输）
```
当前状态: 本地数据: C:\Users\username\AppData\Local\coze2jianying_data\drafts
```

### 场景2：已启用传输且设置路径
```
当前状态: 传输至剪映: C:\Users\username\AppData\Local\JianyingPro\...\com.lveditor.draft
```

### 场景3：已启用传输但未设置路径
```
当前状态: 传输至剪映: 未设置路径
```

## 用户交互流程

### 流程1：使用本地数据存储
1. 打开应用
2. 不勾选"传输草稿到指定文件夹"（默认）
3. 在任意标签页生成草稿
4. 草稿保存在本地数据目录

### 流程2：传输到剪映文件夹
1. 打开应用
2. 点击"自动检测"或"选择文件夹..."设置路径
3. 勾选"传输草稿到指定文件夹"
4. 观察状态显示变化
5. 在任意标签页生成草稿
6. 草稿直接出现在剪映中

### 流程3：切换存储模式
1. 在运行时可随时切换勾选框
2. 状态显示立即更新
3. 后续生成的草稿使用新设置
4. 已生成的草稿不受影响

## 优势

1. **统一管理**：所有标签页使用同一路径设置，避免混乱
2. **界面简洁**：移除重复的UI，标签页更清爽
3. **灵活切换**：可随时在本地和剪映模式间切换
4. **清晰状态**：状态标签实时显示当前策略
5. **向后兼容**：默认行为与之前一致

## 技术实现亮点

- 全局单例模式管理路径状态
- 智能路径验证和自动回退
- 状态同步和UI更新
- 模块解耦，职责清晰
