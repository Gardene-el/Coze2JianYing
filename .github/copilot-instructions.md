# Copilot Instructions for Coze2JianYing

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Coze åˆ°å‰ªæ˜ å·¥ä½œæµé¡¹ç›®ï¼Œæ ¸å¿ƒæ˜¯**è‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨** (`app/`)ï¼Œæä¾› GUI ç•Œé¢å’Œ API åç«¯ï¼Œå°† JSON è½¬æ¢ä¸ºå‰ªæ˜ è‰ç¨¿æ–‡ä»¶ã€‚

**å­é¡¹ç›®**ï¼š
- **Coze æ’ä»¶** (`coze_plugin/`) - ä¸ºè‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨æä¾› Coze æ’ä»¶é…ç½®å’Œæºç ï¼Œå¤„ç†å‚æ•°å’Œå¯¼å‡º JSON

**å†å²é—ç•™**ï¼š
- `data_structures/` - å†å²é—ç•™çš„æ•°æ®ç»“æ„å®šä¹‰ï¼Œå¾…æ˜ç¡®æ›¿ä»£æ–¹æ¡ˆåå°†è¢«ç§»é™¤

### Coze å…³é”®æ¦‚å¿µ

#### æ’ä»¶ (Plugin)

**æ’ä»¶** æ˜¯ Coze å¹³å°ä¸Šçš„æ‰©å±•å·¥å…·ï¼Œç”¨äºå¢å¼º Bot çš„èƒ½åŠ›ã€‚ä¸€ä¸ªæ’ä»¶åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·å‡½æ•°ï¼Œä¸º AI å·¥ä½œæµæä¾›ç‰¹å®šåŠŸèƒ½ã€‚

**æ’ä»¶ç±»å‹**ï¼š

1. **äº‘ä¾§æ’ä»¶ - åœ¨ Coze IDE ä¸­åˆ›å»º**
   - ä½¿ç”¨ Coze æä¾›çš„åœ¨çº¿ IDE ç¼–å†™ä»£ç 
   - æ”¯æŒ Python å’Œ Node.js è¿è¡Œæ—¶
   - ä»£ç æ‰˜ç®¡åœ¨ Coze å¹³å°ä¸Š
   - é€‚åˆå¿«é€Ÿå¼€å‘å’Œæµ‹è¯•
   - **å¯¹åº”æœ¬é¡¹ç›®**ï¼š`coze_plugin/` ç›®å½•ä¸­çš„å·¥å…·å‡½æ•°æºç ï¼Œå¯¹åº”è‰ç¨¿ç”Ÿæˆå™¨ä¸­çš„"**æ‰‹åŠ¨è‰ç¨¿ç”Ÿæˆ**"æ ‡ç­¾é¡µåŠŸèƒ½

2. **äº‘ä¾§æ’ä»¶ - åŸºäºå·²æœ‰æœåŠ¡åˆ›å»º**
   - åŸºäºå·²éƒ¨ç½²çš„ Web æœåŠ¡åˆ›å»ºæ’ä»¶
   - é€šè¿‡é…ç½® API ç«¯ç‚¹å’Œå‚æ•°æ¥å®šä¹‰å·¥å…·
   - æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•åœ°æ–¹
   - æ›´çµæ´»ï¼Œé€‚åˆé›†æˆç°æœ‰ç³»ç»Ÿ
   - **å¯¹åº”æœ¬é¡¹ç›®**ï¼šè‰ç¨¿ç”Ÿæˆå™¨ä¸­çš„"**æœ¬åœ°æœåŠ¡**"æ ‡ç­¾é¡µï¼Œå¯å¯åŠ¨ FastAPI æœåŠ¡ä¾› Coze è°ƒç”¨

**æ’ä»¶çš„æ ¸å¿ƒè¦ç´ **ï¼š
- **å·¥å…· (Tool)**: æ’ä»¶ä¸­çš„å…·ä½“åŠŸèƒ½å•å…ƒï¼Œæ¯ä¸ªå·¥å…·æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œæœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºå®šä¹‰
- **æè¿°ä¿¡æ¯**: å·¥å…·çš„åç§°ã€æè¿°ã€å‚æ•°è¯´æ˜ç­‰ï¼Œå¸®åŠ© LLM ç†è§£ä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨å·¥å…·
- **Handler å‡½æ•°**: Coze IDE æ’ä»¶ä¸­å¿…é¡»å¯¼å‡º `handler` å‡½æ•°ä½œä¸ºå·¥å…·å…¥å£ï¼Œå¤„ç†ç‰¹å®šçš„è¾“å…¥è¾“å‡º

#### å·¥ä½œæµ (Workflow)

åœ¨ Coze å¹³å°ä¸Šåˆ›å»ºçš„è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¯ä»¥è°ƒç”¨å¤šä¸ªæ’ä»¶å’Œå·¥å…·æ¥å®Œæˆå¤æ‚ä»»åŠ¡ã€‚å·¥ä½œæµå°† AI å¯¹è¯ã€æ’ä»¶è°ƒç”¨ã€æ•°æ®å¤„ç†ç­‰ç¯èŠ‚ä¸²è”èµ·æ¥ã€‚

### æ•´ä½“å·¥ä½œæµç¨‹æ¦‚è¿°

å®Œæ•´çš„å·¥ä½œæµæ¶‰åŠå››ä¸ªæ­¥éª¤çš„åä½œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Coze     â”‚â”€â”€â”€â–¶â”‚  Coze æ’ä»¶       â”‚â”€â”€â”€â–¶â”‚ è‰ç¨¿ç”Ÿæˆå™¨       â”‚â”€â”€â”€â–¶â”‚    å‰ªæ˜      â”‚
â”‚   å·¥ä½œæµ    â”‚    â”‚ (coze_plugin/)   â”‚    â”‚ (app/)          â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¯¦ç»†æµç¨‹è¯´æ˜

1. **Coze å·¥ä½œæµ** â†’ ç”Ÿæˆç´ æå’Œå¯¹åº”çš„å‚æ•°
2. **Coze æ’ä»¶** (`coze_plugin/`) â†’ åœ¨ Coze ä¸­è°ƒç”¨å·¥å…·å‡½æ•°ï¼Œå°†ç´ æå’Œå‚æ•°å¤„ç†åå¯¼å‡ºæ ‡å‡† JSON æ•°æ®
3. **è‰ç¨¿ç”Ÿæˆå™¨** (`app/`) â†’ å°† JSON æ•°æ®è½¬æ¢ä¸ºå‰ªæ˜ è‰ç¨¿æ–‡ä»¶ï¼Œä¸‹è½½ç´ æï¼Œç”Ÿæˆå®Œæ•´é¡¹ç›®
   - **æ–¹æ¡ˆä¸€ï¼šæ‰‹åŠ¨ç²˜è´´** - ç”¨æˆ·æ‰‹åŠ¨å¤åˆ¶ Coze æ’ä»¶è¾“å‡ºçš„ JSONï¼Œç²˜è´´åˆ°è‰ç¨¿ç”Ÿæˆå™¨çš„"æ‰‹åŠ¨è‰ç¨¿ç”Ÿæˆ"æ ‡ç­¾é¡µ
   - **æ–¹æ¡ˆäºŒï¼šç½‘ç»œäº‘ç«¯ä¼ è¾“** - Coze é€šè¿‡ API è°ƒç”¨è‰ç¨¿ç”Ÿæˆå™¨çš„"æœ¬åœ°æœåŠ¡"ï¼ˆFastAPI åç«¯ï¼‰ï¼Œè‡ªåŠ¨ä¼ è¾“ JSON æ•°æ®
4. **å‰ªæ˜ ** â†’ ç”¨æˆ·åœ¨å‰ªæ˜ ä¸­æ‰“å¼€ç”Ÿæˆçš„è‰ç¨¿ï¼Œè¿›è¡Œæœ€ç»ˆç¼–è¾‘

#### è®¾è®¡ç†å¿µä¸æŠ€æœ¯çº¦æŸ

è¿™ç§åˆ†ç¦»å¼æ¶æ„è®¾è®¡æ˜¯åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

- **Coze æ–‡ä»¶ç©ºé—´é™åˆ¶**: Coze å¹³å°çš„æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ç©ºé—´æœ‰é™ (`/tmp` ç›®å½•ä»… 512MB)
- **å·¥ä½œæµå®Œæ•´æ€§éœ€æ±‚**: åœ¨ Coze ä¸­å•ä¸ªå·¥ä½œæµéœ€è¦ç”Ÿæˆå®Œæ•´çš„å‰ªæ˜ è‰ç¨¿å†…å®¹å‚æ•°
- **èµ„æºä¼ è¾“ä¼˜åŒ–**: Coze ç”Ÿæˆçš„ç´ æéƒ½æ˜¯ç½‘é¡µé“¾æ¥å½¢å¼ï¼Œæ’ä»¶ä¼ è¾“ç»™è‰ç¨¿ç”Ÿæˆå™¨ä¸ä¼šç›´æ¥ä¼ é€’èµ„æºæ–‡ä»¶ï¼Œè€Œæ˜¯ä¼ é€’é“¾æ¥åˆ—è¡¨
- **ç‹¬ç«‹éƒ¨ç½²éœ€æ±‚**: è‰ç¨¿ç”Ÿæˆå™¨å¯ä»¥æ‰“åŒ…ä¸ºç‹¬ç«‹ exeï¼Œä¾›ä¸ç†Ÿæ‚‰ç¼–ç¨‹çš„ç”¨æˆ·ä½¿ç”¨

### é¡¹ç›®ç»„ä»¶çš„è§’è‰²å®šä½

#### è‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨ (`app/`) - æ ¸å¿ƒé¡¹ç›®

è‰ç¨¿ç”Ÿæˆå™¨æ˜¯æœ¬é¡¹ç›®çš„æ ¸å¿ƒï¼Œå·²å‘å±•ä¸ºå®Œæ•´çš„åº”ç”¨ï¼ŒåŒ…å« GUI ç•Œé¢å’Œ API åç«¯ï¼š

1. **JSON è§£æ**: è§£æ Coze æ’ä»¶å¯¼å‡ºçš„ JSON æ•°æ®
2. **ç´ æç®¡ç†**: ä»ç½‘ç»œä¸‹è½½ç´ ææ–‡ä»¶ï¼Œç»Ÿä¸€å­˜å‚¨ç®¡ç†
3. **è‰ç¨¿ç”Ÿæˆ**: è°ƒç”¨ pyJianYingDraft ç”Ÿæˆå‰ªæ˜ è‰ç¨¿æ–‡ä»¶
4. **GUI åº”ç”¨**: æä¾›å‹å¥½çš„å›¾å½¢ç•Œé¢ï¼Œæ”¯æŒæ—¥å¿—æŸ¥çœ‹å’Œå¤šæ ‡ç­¾é¡µ
   - **æ‰‹åŠ¨è‰ç¨¿ç”Ÿæˆæ ‡ç­¾é¡µ**: ç”¨æˆ·æ‰‹åŠ¨ç²˜è´´ JSON æ•°æ®ç”Ÿæˆè‰ç¨¿
   - **æœ¬åœ°æœåŠ¡æ ‡ç­¾é¡µ**: ç®¡ç† FastAPI æœåŠ¡ï¼Œæ”¯æŒ Coze é€šè¿‡ API è‡ªåŠ¨ä¼ è¾“æ•°æ®
5. **API åç«¯**: FastAPI æœåŠ¡ï¼Œæ”¯æŒæœ¬åœ°æœåŠ¡å’Œè¿œç¨‹è°ƒç”¨
6. **æœ¬åœ°æœåŠ¡é›†æˆ**: GUI ä¸­å¯å¯åŠ¨åµŒå…¥å¼ API æœåŠ¡
7. **æ‰“åŒ…å‘å¸ƒ**: å¯æ‰“åŒ…ä¸º Windows exe æ–‡ä»¶ï¼Œç‹¬ç«‹åˆ†å‘

#### Coze æ’ä»¶ (`coze_plugin/`) - å­é¡¹ç›®

ä¸ºè‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨æä¾› Coze å¹³å°ä¸Šçš„æ’ä»¶æ”¯æŒï¼š

1. **å‚æ•°å¤„ç†ä¸éªŒè¯**: æ¥æ”¶ Coze å·¥ä½œæµä¼ é€’çš„ç´ æé“¾æ¥å’Œå¤„ç†å‚æ•°
2. **pyJianYingDraft åŠŸèƒ½æ˜ å°„**: å°† pyJianYingDraft åº“ä¸­æ‰€æœ‰å¯è®¾ç½®çš„å‰ªæ˜ å‚æ•°é€‰é¡¹åŒ…è£…ä¸º Coze å·¥å…·å‡½æ•°
3. **JSON æ•°æ®ç”Ÿæˆ**: ç”Ÿæˆæ ‡å‡†åŒ–çš„ JSON æ ¼å¼æ•°æ®ï¼Œä¾›è‰ç¨¿ç”Ÿæˆå™¨ä½¿ç”¨
4. **é“¾æ¥èµ„æºç®¡ç†**: å¤„ç†å’ŒéªŒè¯ Coze ä¼ é€’çš„ç½‘é¡µé“¾æ¥èµ„æº
5. **ä¸¤ç§æ’ä»¶å½¢æ€æ”¯æŒ**:
   - äº‘ä¾§æ’ä»¶æºç  (åœ¨ Coze IDE ä¸­åˆ›å»º)ï¼šæä¾›å·¥å…·å‡½æ•°æºç ä¾›ç”¨æˆ·éƒ¨ç½²
   - æœåŠ¡ç«¯ç‚¹é…ç½® (åŸºäºå·²æœ‰æœåŠ¡åˆ›å»º)ï¼šé…åˆè‰ç¨¿ç”Ÿæˆå™¨çš„ API åç«¯ä½¿ç”¨

#### pyJianYingDraft æ·±åº¦é›†æˆ

æœ¬é¡¹ç›®çš„æ ¸å¿ƒç»„ä»¶éƒ½ä¾èµ– pyJianYingDraft åº“ï¼š

- **å‚æ•°å®Œæ•´æ€§**: ç†è§£å’Œåº”ç”¨ pyJianYingDraft ä¸­å‰ªæ˜ å†…å®¹çš„æ‰€æœ‰å¯é…ç½®å‚æ•°
- **åŠŸèƒ½è¦†ç›–**: ç¡®ä¿å‰ªæ˜ ä¸­æ‰€æœ‰å¯é€‰æ‹©çš„å‚æ•°è®¾ç½®éƒ½èƒ½åœ¨å·¥å…·å‡½æ•°ä¸­ä½“ç°
- **æ ‡å‡†åŒ–è¾“å‡º**: æä¾›æ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„å’Œå‚æ•°æ ¼å¼

## é¡¹ç›®å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

#### Coze æ’ä»¶åŠŸèƒ½
1. **create_draft å·¥å…·** - UUID è‰ç¨¿åˆ›å»ºï¼Œæ”¯æŒå®Œæ•´çš„é¡¹ç›®é…ç½®å‚æ•°
2. **export_drafts å·¥å…·** - å•ä¸ªå’Œæ‰¹é‡è‰ç¨¿å¯¼å‡ºï¼Œæ”¯æŒ `export_all` åŠŸèƒ½
3. **get_media_duration å·¥å…·** - ç½‘ç»œåª’ä½“æ—¶é•¿åˆ†æå’Œæ—¶é—´è½´è®¡ç®—
4. **add_videos/add_images/add_audios/add_captions å·¥å…·** - æ·»åŠ å„ç±»åª’ä½“å’Œå­—å¹•è½¨é“
5. **make_*_info ç³»åˆ—å·¥å…·** - åŠ¨æ€ç”Ÿæˆå„ç±»æ®µé…ç½® JSON
6. **å®Œæ•´æ•°æ®æ¨¡å‹** - è‰ç¨¿ç”Ÿæˆå™¨æ¥å£å’Œåª’ä½“å¤„ç†æ¨¡å‹
7. **æµ‹è¯•ä½“ç³»** - coze_plugin/tests/ ä¸­çš„å®Œæ•´æµ‹è¯•å¥—ä»¶

#### è‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨åŠŸèƒ½
1. **GUI åº”ç”¨** - åŸºäº Tkinter çš„æ ‡ç­¾é¡µæ¶æ„å›¾å½¢ç•Œé¢
   - **è‰ç¨¿ç”Ÿæˆæ ‡ç­¾é¡µ** - æ ¸å¿ƒçš„è‰ç¨¿ç”ŸæˆåŠŸèƒ½
   - **æœ¬åœ°æœåŠ¡æ ‡ç­¾é¡µ** - åµŒå…¥å¼ API æœåŠ¡ç®¡ç†å’Œ Coze API é…ç½®
2. **API åç«¯** - FastAPI æœåŠ¡ï¼Œæä¾› RESTful æ¥å£
   - æ”¯æŒç‹¬ç«‹è¿è¡Œ (`python start_api.py`)
   - æ”¯æŒ GUI å†…åµŒå…¥å¼å¯åŠ¨
   - åŒ…å«å®Œæ•´çš„ API æ–‡æ¡£ (Swagger UI / ReDoc)
3. **å¤šæ ¼å¼è¾“å…¥æ”¯æŒ** - æ™ºèƒ½è¯†åˆ«å¤šç§ JSON æ ¼å¼
4. **ç´ æç®¡ç†ç³»ç»Ÿ** - ç»Ÿä¸€ä¸‹è½½å’Œå­˜å‚¨ç´ æ
5. **å®Œæ•´æ—¥å¿—ç³»ç»Ÿ** - æ–‡ä»¶å’Œ GUI åŒé‡æ—¥å¿—ï¼ŒåµŒå…¥å¼æ—¥å¿—é¢æ¿
6. **è‰ç¨¿å…ƒæ•°æ®ç®¡ç†** - ç‹¬ç«‹çš„ root_meta_info.json ç”Ÿæˆ
7. **æ‰“åŒ…è„šæœ¬** - PyInstaller æ„å»º exe æ–‡ä»¶
8. **GitHub Actions** - è‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒ

### ğŸ”„ æŠ€æœ¯æ¶æ„ç‰¹ç‚¹
- **UUID ç®¡ç†ç³»ç»Ÿ**: è§£å†³ Coze å¹³å°çŠ¶æ€ç®¡ç†éš¾é¢˜
- **ç½‘ç»œèµ„æºå¤„ç†**: æ”¯æŒ Coze å¹³å°çš„é“¾æ¥èµ„æºæ¨¡å¼  
- **å‘åå…¼å®¹æ€§**: æ‰€æœ‰ç³»ç»Ÿæ›´æ–°ä¿æŒ 100% å‘åå…¼å®¹
- **é”™è¯¯å¤„ç†å®Œå–„**: åŒ…å« NoneType å¤„ç†ã€å‚æ•°éªŒè¯ç­‰å…³é”®ä¿®å¤
- **æ¨¡å—åŒ–è®¾è®¡**: ä¸‰ä¸ªå­é¡¹ç›®ç›¸å¯¹ç‹¬ç«‹ï¼Œæ˜“äºç»´æŠ¤
- **æ ‡ç­¾é¡µæ¶æ„**: GUI é‡‡ç”¨æ ‡ç­¾é¡µè®¾è®¡ï¼ŒåŠŸèƒ½æ¨¡å—åŒ–ï¼Œå˜é‡éš”ç¦»
- **API ä¸ GUI é›†æˆ**: æ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼ï¼ˆç‹¬ç«‹ APIã€ç‹¬ç«‹ GUIã€é›†æˆæ¨¡å¼ï¼‰
- **æœ¬åœ°æœåŠ¡æ”¯æŒ**: GUI å¯å¯åŠ¨å’Œç®¡ç†æœ¬åœ° API æœåŠ¡ï¼Œæ”¯æŒè¿›ç¨‹ç›‘æ§

### ğŸ“‹ æœªæ¥è®¡åˆ’åŠŸèƒ½
- è§†é¢‘è½¨é“åŠŸèƒ½å¢å¼º
- å…³é”®å¸§åŠ¨ç”»æ”¯æŒ
- æ›´å¤šé«˜çº§ç‰¹æ•ˆå’Œæ»¤é•œ
- Coze API é›†æˆå®Œå–„ï¼ˆå½“å‰å·²æœ‰åŸºç¡€é…ç½®ç•Œé¢ï¼‰

## Coze å¹³å°ç‰¹æ€§ä¸çº¦æŸ

### ä»£ç æ¶æ„çº¦æŸ
- **æ— å…±åŒå¤´æ–‡ä»¶æ¦‚å¿µ**ï¼šæ¯ä¸ªå·¥å…·å‡½æ•°è„šæœ¬æ–‡ä»¶éœ€è¦é‡å¤å®šä¹‰æ‰€éœ€çš„è‡ªå®šä¹‰ç±»å’Œå·¥å…·å‡½æ•°
- **æ–‡ä»¶ç³»ç»Ÿé™åˆ¶**ï¼šé»˜è®¤å¯è¯»å†™æ–‡ä»¶å¤¹æ˜¯ `/tmp`ï¼Œå¤§å°é™åˆ¶ 512MBï¼Œç”Ÿå‘½å‘¨æœŸç®¡ç†å¤æ‚
- **å‡½æ•°å¼é£æ ¼**ï¼šé¿å…åœ¨æœ¬åœ°ç©ºé—´æˆ–è„šæœ¬ä¸­å­˜å‚¨çŠ¶æ€å˜é‡ï¼Œæ‰€æœ‰æ•°æ®éƒ½åº”è¯¥é€šè¿‡å‚æ•°ä¼ é€’

### æ ‡å‡†ä»£ç ç»“æ„
æ¯ä¸ª Coze å·¥å…·å‡½æ•°å¿…é¡»éµå¾ªä»¥ä¸‹æ¨¡æ¿ï¼š

```python
from runtime import Args
from typings.custom_handler_name.custom_handler_name import Input, Output

"""
Each file needs to export a function named `handler`. This function is the entrance to the Tool.

Parameters:
args: parameters of the entry function.
args.input - input parameters, you can get test input value by args.input.xxx.
args.logger - logger instance used to print logs, injected by runtime.

Remember to fill in input/output in Metadata, it helps LLM to recognize and use tool.

Return:
The return data of the function, which should match the declared output parameters.
"""
def handler(args: Args[Input])->Output:
    return {"message": "Hello, world!"}
```

## é¡¹ç›®ç»“æ„è§„åˆ’

### æ ¸å¿ƒç»„ä»¶

#### 1. Coze Plugin å­é¡¹ç›®
ä½ç½®ï¼š`coze_plugin/` ç›®å½•

åŒ…å«ä¸“é—¨ä¸º Coze å¹³å°è®¾è®¡çš„æ’ä»¶å·¥å…·å’Œæ ¸å¿ƒåŠ©æ‰‹åŠŸèƒ½ï¼š
- `main.py` - æ ¸å¿ƒåŠ©æ‰‹ç±»å’Œä¸»ç¨‹åºå…¥å£
- `tools/` - Coze å·¥å…·å‡½æ•°è„šæœ¬
  - `create_draft/` - åˆ›å»ºè‰ç¨¿å·¥å…·
  - `export_drafts/` - å¯¼å‡ºè‰ç¨¿å·¥å…·
  - `get_media_duration/` - åª’ä½“æ—¶é•¿åˆ†æå·¥å…·
  - `add_videos/`, `add_images/`, `add_audios/`, `add_captions/` - æ·»åŠ å„ç±»è½¨é“
  - `make_*_info/` - åŠ¨æ€ç”Ÿæˆé…ç½®å·¥å…·
- `base_tools/` - åŸºç¡€å·¥å…·å‡½æ•°
- `tests/` - å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- `examples/` - ä½¿ç”¨ç¤ºä¾‹

#### 2. è‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨
ä½ç½®ï¼š`app/` ç›®å½•

åŒ…å«å®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œå« GUI å’Œ APIï¼š
- `main.py` - GUI åº”ç”¨å…¥å£
- `api_main.py` - API æœåŠ¡å…¥å£
- `gui/` - å›¾å½¢ç•Œé¢æ¨¡å—
  - `main_window.py` - ä¸»çª—å£ï¼ˆæ ‡ç­¾é¡µå®¹å™¨ï¼‰
  - `base_tab.py` - æ ‡ç­¾é¡µåŸºç±»
  - `draft_generator_tab.py` - è‰ç¨¿ç”Ÿæˆæ ‡ç­¾é¡µ
  - `local_service_tab.py` - æœ¬åœ°æœåŠ¡ç®¡ç†æ ‡ç­¾é¡µ
  - `log_window.py` - æ—¥å¿—çª—å£
- `api/` - API è·¯ç”±æ¨¡å—
  - `router.py` - API è·¯ç”±å®šä¹‰
  - `example_routes.py` - ç¤ºä¾‹è·¯ç”±
- `utils/` - æ ¸å¿ƒå·¥å…·æ¨¡å—
  - `draft_generator.py` - è‰ç¨¿ç”Ÿæˆä¸»é€»è¾‘
  - `coze_parser.py` - Coze è¾“å‡ºè§£æ
  - `converter.py` - æ•°æ®è½¬æ¢
  - `material_manager.py` - ç´ æç®¡ç†
  - `draft_meta_manager.py` - å…ƒæ•°æ®ç®¡ç†
  - `logger.py` - æ—¥å¿—ç³»ç»Ÿ
- `core/` - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- `models/` - æ•°æ®æ¨¡å‹
- `schemas/` - API æ•°æ®æ¨¡å¼
- `services/` - ä¸šåŠ¡æœåŠ¡å±‚
- `database/` - æ•°æ®åº“ç›¸å…³ï¼ˆé¢„ç•™ï¼‰

#### 3. æ•°æ®ç»“æ„è„šæœ¬ (Data Structure Scripts)
ä½ç½®ï¼š`data_structures/` ç›®å½•

åŒ…å«å¯å¤ç”¨çš„æ•°æ®ç»“æ„å®šä¹‰ï¼š
- `draft_generator_interface/` - è‰ç¨¿ç”Ÿæˆå™¨æ¥å£æ¨¡å‹
  - `models.py` - å®Œæ•´çš„æ¥å£æ•°æ®æ¨¡å‹
  - `README.md` - è¯¦ç»†çš„æ¥å£æ–‡æ¡£
- `media_models/` - åª’ä½“æ–‡ä»¶æ¨¡å‹
  - `models.py` - åª’ä½“å¤„ç†æ•°æ®æ¨¡å‹
  - `README.md` - åª’ä½“æ¨¡å‹æ–‡æ¡£

#### 4. é¡¹ç›®æ–‡æ¡£
ä½ç½®ï¼š`docs/` ç›®å½•

å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£ç³»ç»Ÿï¼š
- `guides/` - å¼€å‘ä¸ä½¿ç”¨æŒ‡å—
  - `DEVELOPMENT_ROADMAP.md` - åŠŸèƒ½å¼€å‘å†ç¨‹
  - `DRAFT_MANAGEMENT_GUIDE.md` - è‰ç¨¿ç®¡ç†æŒ‡å—
- `draft_generator/` - è‰ç¨¿ç”Ÿæˆå™¨ä¸“é—¨æ–‡æ¡£
  - æ¶æ„ã€å·¥ä½œæµç¨‹ã€ç»„ä»¶æŒ‡å—ç­‰
- `reference/` - API å‚è€ƒæ–‡æ¡£
  - æ¥å£æ–‡æ¡£ã€å‚æ•°åˆ—è¡¨ç­‰
- `updates/` - åŠŸèƒ½æ›´æ–°è®°å½•
- `analysis/` - æŠ€æœ¯åˆ†ææŠ¥å‘Š

#### 5. æ„å»ºå’Œéƒ¨ç½²
- `build.py` - PyInstaller æ‰“åŒ…è„šæœ¬
- `start_api.py` - API æœåŠ¡å¿«é€Ÿå¯åŠ¨è„šæœ¬
- `start_api.bat` - Windows æ‰¹å¤„ç†å¯åŠ¨è„šæœ¬
- `.github/workflows/` - CI/CD é…ç½®
- `requirements.txt` - é¡¹ç›®ä¾èµ–
- `setup.py` - é¡¹ç›®å®‰è£…é…ç½®

### å®é™…é¡¹ç›®ç»“æ„ (å½“å‰çŠ¶æ€)
```
Coze2JianYing/
â”œâ”€â”€ coze_plugin/                # ğŸ”Œ Coze æ’ä»¶å­é¡¹ç›®
â”‚   â”œâ”€â”€ __init__.py            # å­é¡¹ç›®åˆå§‹åŒ–
â”‚   â”œâ”€â”€ README.md              # å­é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ main.py                # æ ¸å¿ƒåŠ©æ‰‹ç±»å’Œä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ tools/                 # Coze å·¥å…·å‡½æ•°è„šæœ¬ (å·²å®ç°)
â”‚   â”‚   â”œâ”€â”€ create_draft/      # âœ… åˆ›å»ºè‰ç¨¿å·¥å…·
â”‚   â”‚   â”œâ”€â”€ export_drafts/     # âœ… å¯¼å‡ºè‰ç¨¿å·¥å…·
â”‚   â”‚   â”œâ”€â”€ get_media_duration/# âœ… åª’ä½“æ—¶é•¿åˆ†æå·¥å…·
â”‚   â”‚   â”œâ”€â”€ add_videos/        # âœ… æ·»åŠ è§†é¢‘å·¥å…·
â”‚   â”‚   â”œâ”€â”€ add_audios/        # âœ… æ·»åŠ éŸ³é¢‘å·¥å…·
â”‚   â”‚   â”œâ”€â”€ add_images/        # âœ… æ·»åŠ å›¾ç‰‡å·¥å…·
â”‚   â”‚   â”œâ”€â”€ add_captions/      # âœ… æ·»åŠ å­—å¹•å·¥å…·
â”‚   â”‚   â”œâ”€â”€ add_effects/       # âš ï¸ ç‰¹æ•ˆå·¥å…·ï¼ˆå·²å¼ƒç”¨ï¼Œå¾…é‡æ–°å®ç°ï¼‰
â”‚   â”‚   â””â”€â”€ make_*_info/       # âœ… å„ç±»é…ç½®ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ base_tools/            # åŸºç¡€å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ tests/                 # âœ… å®Œæ•´æµ‹è¯•å¥—ä»¶
â”‚   â””â”€â”€ examples/              # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ app/                       # ğŸ“¦ è‰ç¨¿ç”Ÿæˆå™¨åº”ç”¨
â”‚   â”œâ”€â”€ main.py               # GUI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ api_main.py           # API æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ gui/                  # å›¾å½¢ç•Œé¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ main_window.py   # ä¸»çª—å£
â”‚   â”‚   â”œâ”€â”€ base_tab.py      # æ ‡ç­¾é¡µåŸºç±»
â”‚   â”‚   â”œâ”€â”€ draft_generator_tab.py  # è‰ç¨¿ç”Ÿæˆæ ‡ç­¾é¡µ
â”‚   â”‚   â”œâ”€â”€ local_service_tab.py    # æœ¬åœ°æœåŠ¡æ ‡ç­¾é¡µ
â”‚   â”‚   â””â”€â”€ log_window.py    # æ—¥å¿—çª—å£
â”‚   â”œâ”€â”€ api/                  # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ router.py        # ä¸»è·¯ç”±
â”‚   â”‚   â””â”€â”€ example_routes.py # ç¤ºä¾‹è·¯ç”±
â”‚   â”œâ”€â”€ utils/                # æ ¸å¿ƒå·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ draft_generator.py    # è‰ç¨¿ç”Ÿæˆä¸»é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ coze_parser.py        # Coze è¾“å‡ºè§£æ
â”‚   â”‚   â”œâ”€â”€ converter.py          # æ•°æ®è½¬æ¢
â”‚   â”‚   â”œâ”€â”€ material_manager.py   # ç´ æç®¡ç†
â”‚   â”‚   â”œâ”€â”€ draft_meta_manager.py # å…ƒæ•°æ®ç®¡ç†
â”‚   â”‚   â””â”€â”€ logger.py             # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/              # API æ•°æ®æ¨¡å¼
â”‚   â”œâ”€â”€ services/             # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â””â”€â”€ database/             # æ•°æ®åº“ç›¸å…³ï¼ˆé¢„ç•™ï¼‰
â”œâ”€â”€ data_structures/          # ğŸ“Š æ•°æ®ç»“æ„å®šä¹‰ (å·²å®ç°)
â”‚   â”œâ”€â”€ draft_generator_interface/  # âœ… è‰ç¨¿ç”Ÿæˆå™¨æ¥å£
â”‚   â”‚   â”œâ”€â”€ models.py         
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ media_models/         # âœ… åª’ä½“æ–‡ä»¶æ¨¡å‹
â”‚       â”œâ”€â”€ models.py         
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ docs/                     # âœ… é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ guides/               # å¼€å‘ä¸ä½¿ç”¨æŒ‡å—
â”‚   â”‚   â””â”€â”€ DEVELOPMENT_ROADMAP.md  # åŠŸèƒ½å¼€å‘å†ç¨‹
â”‚   â”œâ”€â”€ draft_generator/      # è‰ç¨¿ç”Ÿæˆå™¨æ–‡æ¡£
â”‚   â”œâ”€â”€ reference/            # API å‚è€ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ updates/              # åŠŸèƒ½æ›´æ–°è®°å½•
â”‚   â””â”€â”€ analysis/             # æŠ€æœ¯åˆ†ææŠ¥å‘Š
â”œâ”€â”€ scripts/                  # ğŸ› ï¸ å®ç”¨å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ coze_json_formatter.py # JSON æ ¼å¼åŒ–å·¥å…·
â”œâ”€â”€ resources/                # ğŸ“ åº”ç”¨èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ README.md            # èµ„æºç›®å½•è¯´æ˜ï¼ˆå­˜æ”¾å›¾æ ‡ç­‰ï¼‰
â”œâ”€â”€ build.py                 # ğŸ”¨ PyInstaller æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ start_api.py             # ğŸš€ API å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_api.bat            # ğŸªŸ Windows æ‰¹å¤„ç†å¯åŠ¨
â”œâ”€â”€ .github/workflows/       # âš™ï¸ CI/CD é…ç½®
â”‚   â””â”€â”€ build.yml           # æ„å»ºå’Œå‘å¸ƒå·¥ä½œæµ
â”œâ”€â”€ requirements.txt         # âœ… é¡¹ç›®ä¾èµ–
â”œâ”€â”€ setup.py                 # âœ… å®‰è£…é…ç½®
â””â”€â”€ README.md                # âœ… é¡¹ç›®è¯´æ˜
```

## ç¼–ç æŒ‡å—

### Coze å·¥å…·å‡½æ•°å¼€å‘è§„èŒƒ

1. **å‡½æ•°å…¥å£**ï¼š
   - å¿…é¡»å¯¼å‡ºåä¸º `handler` çš„å‡½æ•°
   - ä½¿ç”¨ `Args[Input]` ç±»å‹æ³¨è§£
   - è¿”å›ç¬¦åˆ `Output` å®šä¹‰çš„æ•°æ®

2. **ä¾èµ–ç®¡ç†**ï¼š
   - åœ¨æ¯ä¸ªè„šæœ¬å†…éƒ¨é‡æ–°å®šä¹‰æ‰€éœ€çš„ç±»å’Œå‡½æ•°
   - å¯ä»¥ import å…¬å…±åº“å¦‚ `pyjianyingdraft`
   - é¿å…è·¨æ–‡ä»¶çš„è‡ªå®šä¹‰ä¾èµ–

3. **æ–‡ä»¶æ“ä½œ**ï¼š
   - å°½é‡é¿å…ä½¿ç”¨ `/tmp` ç›®å½•
   - å¦‚å¿…é¡»ä½¿ç”¨ï¼Œç¡®ä¿åŠæ—¶æ¸…ç†
   - ä¼˜å…ˆä½¿ç”¨å†…å­˜å¤„ç†æˆ–å‚æ•°ä¼ é€’

4. **çŠ¶æ€ç®¡ç†**ï¼š
   - é¿å…å…¨å±€å˜é‡å’Œç±»å±æ€§å­˜å‚¨çŠ¶æ€
   - æ‰€æœ‰çŠ¶æ€é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’
   - é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼

5. **èµ„æºé“¾æ¥å¤„ç†**ï¼š
   - Coze ä¼ é€’çš„ç´ æå‡ä¸ºç½‘é¡µé“¾æ¥æ ¼å¼
   - å·¥å…·å‡½æ•°åº”éªŒè¯é“¾æ¥æœ‰æ•ˆæ€§
   - ä¼ é€’é“¾æ¥åˆ—è¡¨è€Œéç›´æ¥ä¸‹è½½èµ„æºæ–‡ä»¶
   - ä¸ºè‰ç¨¿ç”Ÿæˆå™¨ä¿ç•™é“¾æ¥ä¿¡æ¯ä»¥ä¾¿åç»­å¤„ç†

### pyJianYingDraft é›†æˆä¸å‚æ•°è¦†ç›–

#### æ ¸å¿ƒé›†æˆç›®æ ‡

æœ¬é¡¹ç›®ä½¿ç”¨ pyJianYingDraft ä¸ä»…ä»…æ˜¯ä¸ºäº†ç”Ÿæˆè‰ç¨¿æ–‡ä»¶ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š

1. **å®Œæ•´å‚æ•°æ˜ å°„**: å°† pyJianYingDraft ä¸­æ‰€æœ‰å¯é…ç½®çš„å‰ªæ˜ å‚æ•°é€‰é¡¹åŒ…è£…ä¸º Coze å·¥å…·å‡½æ•°
2. **åŠŸèƒ½å…¨è¦†ç›–**: ç¡®ä¿å‰ªæ˜ ä¸­æ‰€æœ‰å¯è®¾ç½®çš„å‚æ•°éƒ½èƒ½é€šè¿‡æœ¬é¡¹ç›®çš„å·¥å…·å‡½æ•°è¿›è¡Œé…ç½®
3. **å‚æ•°éªŒè¯**: ç†è§£å¹¶éªŒè¯å„ç§å‚æ•°ç»„åˆçš„æœ‰æ•ˆæ€§å’Œå…¼å®¹æ€§

#### 1. æ­£ç¡®çš„å¯¼å…¥æ–¹å¼ï¼š
```python
from pyJianYingDraft import DraftFolder, VideoMaterial, AudioMaterial
from pyJianYingDraft import VideoSegment, AudioSegment, TextSegment
from pyJianYingDraft import FilterType, TransitionType, EffectSegment
# å¯¼å…¥æ‰€æœ‰ç›¸å…³çš„å‚æ•°ç±»å‹å’Œæšä¸¾
```

#### 2. é“¾æ¥èµ„æºå¤„ç†æ¨¡å¼ï¼š
```python
# å¤„ç† Coze ä¼ é€’çš„ç½‘é¡µé“¾æ¥
def process_media_links(args: Args[Input]) -> Output:
    video_links = args.input.video_urls  # ç½‘é¡µé“¾æ¥åˆ—è¡¨
    audio_links = args.input.audio_urls  # éŸ³é¢‘é“¾æ¥åˆ—è¡¨
    
    # éªŒè¯é“¾æ¥æœ‰æ•ˆæ€§ä½†ä¸ä¸‹è½½
    validated_links = validate_media_links(video_links + audio_links)
    
    # ç”Ÿæˆ JSON æ•°æ®ä¾›è‰ç¨¿ç”Ÿæˆå™¨ä½¿ç”¨
    draft_json = {
        "video_resources": video_links,
        "audio_resources": audio_links,
        "processing_parameters": extract_jianyingdraft_params(args.input)
    }
    
    return {"draft_json": draft_json}
```

#### 3. å‚æ•°æ˜ å°„ç¤ºä¾‹ï¼š
```python
# å°† pyJianYingDraft çš„æ‰€æœ‰å‚æ•°é€‰é¡¹æ˜ å°„åˆ°å·¥å…·å‡½æ•°
def map_video_parameters(input_params):
    """æ˜ å°„è§†é¢‘ç›¸å…³çš„æ‰€æœ‰å¯é…ç½®å‚æ•°"""
    return {
        "filter_type": FilterType.from_string(input_params.filter),
        "transition_type": TransitionType.from_string(input_params.transition),
        "crop_settings": CropSettings(**input_params.crop_config),
        "effect_settings": process_effect_parameters(input_params.effects),
        # ... åŒ…å«æ‰€æœ‰ pyJianYingDraft æ”¯æŒçš„å‚æ•°
    }
```

### æ–‡æ¡£è§„èŒƒ

æ¯ä¸ªå·¥å…·å‡½æ•°å’Œæ•°æ®ç»“æ„éƒ½å¿…é¡»æœ‰å¯¹åº”çš„ README.mdï¼ŒåŒ…å«ï¼š

1. **åŠŸèƒ½æè¿°**ï¼šç®€è¦è¯´æ˜å·¥å…·çš„ç”¨é€”
2. **è¾“å…¥å‚æ•°**ï¼šè¯¦ç»†åˆ—å‡ºæ‰€æœ‰è¾“å…¥å‚æ•°åŠå…¶ç±»å‹
3. **è¾“å‡ºç»“æœ**ï¼šè¯´æ˜è¿”å›å€¼çš„ç»“æ„å’Œå«ä¹‰
4. **ä½¿ç”¨ç¤ºä¾‹**ï¼šæä¾›å®Œæ•´çš„ä½¿ç”¨ä»£ç ç¤ºä¾‹
5. **æ³¨æ„äº‹é¡¹**ï¼šç‰¹æ®Šé™åˆ¶æˆ–æ³¨æ„ç‚¹

#### README æ¨¡æ¿

```markdown
# [å·¥å…·åç§°]

## åŠŸèƒ½æè¿°
[ç®€è¦æè¿°å·¥å…·çš„åŠŸèƒ½å’Œç”¨é€”]

## è¾“å…¥å‚æ•°

### Input ç±»å‹å®šä¹‰
```python
class Input:
    param1: str  # å‚æ•°1è¯´æ˜
    param2: int  # å‚æ•°2è¯´æ˜
    # ...
```

## è¾“å‡ºç»“æœ

### Output ç±»å‹å®šä¹‰
```python
class Output:
    result1: str    # ç»“æœ1è¯´æ˜
    result2: bool   # ç»“æœ2è¯´æ˜
    # ...
```

## ä½¿ç”¨ç¤ºä¾‹
```python
# ç¤ºä¾‹ä»£ç 
```

## æ³¨æ„äº‹é¡¹
- [åˆ—å‡ºé‡è¦çš„æ³¨æ„äº‹é¡¹]
- [æ€§èƒ½è€ƒè™‘]
- [é”™è¯¯å¤„ç†è¯´æ˜]
```

## å¼€å‘æœ€ä½³å®è·µ

### é”™è¯¯å¤„ç†
- ä½¿ç”¨ `args.logger` è®°å½•æ—¥å¿—
- æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- ä¼˜é›…å¤„ç†å¼‚å¸¸æƒ…å†µ

### æ€§èƒ½ä¼˜åŒ–
- é¿å…å¤§æ–‡ä»¶åœ¨ `/tmp` ä¸­çš„é•¿æœŸå­˜å‚¨
- ä½¿ç”¨æµå¼å¤„ç†å¤„ç†å¤§å‹åª’ä½“æ–‡ä»¶
- åˆç†ä½¿ç”¨å†…å­˜ç¼“å­˜

### æµ‹è¯•æŒ‡å—

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•ä½“ç³»ï¼Œä¸»è¦é›†ä¸­åœ¨ `coze_plugin/tests/` ç›®å½•ä¸­ã€‚

#### æµ‹è¯•ç»„ç»‡
- **`coze_plugin/tests/`** ç›®å½•åŒ…å«æ‰€æœ‰ Coze æ’ä»¶å·¥å…·çš„æµ‹è¯•
- æ¯ä¸ªæµ‹è¯•æ–‡ä»¶ç‹¬ç«‹è¿è¡Œï¼Œæ— ç›¸äº’ä¾èµ–
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`test_[åŠŸèƒ½åç§°].py`
- åŒ…å« README.md è¯´æ˜æµ‹è¯•ç›®çš„å’Œè¿è¡Œæ–¹æ³•

#### æµ‹è¯•ç±»å‹
- **åŸºç¡€åŠŸèƒ½æµ‹è¯•** (`test_basic.py`): æ•°æ®ç»“æ„å’Œæ ¸å¿ƒåŠŸèƒ½
- **å·¥å…·å‡½æ•°æµ‹è¯•** (`test_tools.py`, `test_add_*.py`): Coze å·¥å…·çš„ç«¯åˆ°ç«¯æµ‹è¯•
- **ä¿®å¤éªŒè¯æµ‹è¯•**: éªŒè¯ç‰¹å®š bug ä¿®å¤çš„æœ‰æ•ˆæ€§
- **æ¶æ„å˜æ›´æµ‹è¯•**: éªŒè¯ç³»ç»Ÿå‡çº§çš„å‘åå…¼å®¹æ€§

#### æµ‹è¯•ç¼–å†™è§„èŒƒ
```python
#!/usr/bin/env python3
"""
Test description and purpose
"""

def test_specific_function():
    """Test the specific function with description"""
    print("=== Testing specific function ===")
    
    # Setup
    # Test execution
    # Assertions
    # Cleanup
    
    print("âœ… Test passed!")
    return True

if __name__ == "__main__":
    # Run all tests
    results = []
    results.append(test_specific_function())
    
    print(f"\\n=== Test Summary ===")
    print(f"Tests passed: {sum(results)}/{len(results)}")
```

#### æµ‹è¯•è¿è¡Œ
```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•
python coze_plugin/tests/test_basic.py

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cd coze_plugin/tests && python test_*.py
```

### æ€§èƒ½ä¼˜åŒ–
- é¿å…å¤§æ–‡ä»¶åœ¨ `/tmp` ä¸­çš„é•¿æœŸå­˜å‚¨
- ä½¿ç”¨æµå¼å¤„ç†å¤„ç†å¤§å‹åª’ä½“æ–‡ä»¶
- åˆç†ä½¿ç”¨å†…å­˜ç¼“å­˜

### åŸæœ‰æµ‹è¯•è€ƒè™‘
- æ¯ä¸ªå·¥å…·å‡½æ•°éƒ½åº”è¯¥å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- æä¾›ä¸åŒåœºæ™¯çš„æµ‹è¯•ç”¨ä¾‹
- è€ƒè™‘è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ

## é›†æˆ Coze å¹³å°

### Metadata é…ç½®
ç¡®ä¿åœ¨ Coze å¹³å°ä¸Šæ­£ç¡®é…ç½®å·¥å…·çš„ Metadataï¼š
- è¾“å…¥è¾“å‡ºå‚æ•°å®šä¹‰è¦ä¸ä»£ç ä¸€è‡´
- æä¾›æ¸…æ™°çš„å·¥å…·æè¿°
- è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´

### è°ƒè¯•å»ºè®®
- ä½¿ç”¨ `args.logger` è¾“å‡ºè°ƒè¯•ä¿¡æ¯
- åœ¨å¼€å‘é˜¶æ®µè¿”å›è¯¦ç»†çš„ä¸­é—´ç»“æœ
- è€ƒè™‘æ·»åŠ è°ƒè¯•æ¨¡å¼å¼€å…³

## è‰ç¨¿ç”Ÿæˆå™¨æ¥å£è§„èŒƒ

### æ•°æ®äº¤æ¢æ ¼å¼

æœ¬é¡¹ç›®ç”Ÿæˆçš„ JSON æ•°æ®éœ€è¦ç¬¦åˆè‰ç¨¿ç”Ÿæˆå™¨çš„è¾“å…¥è§„èŒƒï¼š

```python
# æ ‡å‡†è¾“å‡ºæ ¼å¼ (å ä½ç¬¦å®šä¹‰)
{
    "project_info": {
        "name": "é¡¹ç›®åç§°",
        "resolution": "1920x1080",
        "frame_rate": 30
    },
    "media_resources": {
        "video_urls": ["https://example.com/video1.mp4", ...],
        "audio_urls": ["https://example.com/audio1.mp3", ...],
        "image_urls": ["https://example.com/image1.jpg", ...]
    },
    "timeline_config": {
        "video_tracks": [...],  # è§†é¢‘è½¨é“é…ç½®
        "audio_tracks": [...],  # éŸ³é¢‘è½¨é“é…ç½®
        "text_tracks": [...]    # æ–‡å­—è½¨é“é…ç½®
    },
    "processing_parameters": {
        # æ‰€æœ‰ pyJianYingDraft å‚æ•°çš„å®Œæ•´æ˜ å°„
        # *å ä½ç¬¦ï¼šå¾…è‰ç¨¿ç”Ÿæˆå™¨é¡¹ç›®å»ºç«‹åè¯¦ç»†å®šä¹‰*
    }
}
```

### æ¥å£è®¾è®¡åŸåˆ™

- **é“¾æ¥ä¼ é€’**: æ‰€æœ‰åª’ä½“èµ„æºå‡ä»¥ URL å½¢å¼ä¼ é€’
- **å‚æ•°å®Œæ•´**: åŒ…å« pyJianYingDraft æ”¯æŒçš„æ‰€æœ‰é…ç½®é€‰é¡¹
- **å‘å‰å…¼å®¹**: è®¾è®¡æ—¶è€ƒè™‘æœªæ¥è‰ç¨¿ç”Ÿæˆå™¨çš„æ‰©å±•éœ€æ±‚
- **éªŒè¯æœºåˆ¶**: æä¾›æ•°æ®æ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†

*æ³¨ï¼šå…·ä½“æ¥å£è§„èŒƒå°†åœ¨è‰ç¨¿ç”Ÿæˆå™¨é¡¹ç›®å»ºç«‹åè¿›è¡Œè¯¦ç»†è¡¥å……å’Œå®Œå–„*

## é‡è¦æ¶æ„è¯´æ˜ï¼špyJianYingDraft æ®µç±»å‹æ˜ å°„

### åª’ä½“èµ„æºå¼•ç”¨æ–¹å¼

æœ¬é¡¹ç›®é€šè¿‡å„æ®µé…ç½®ç±»çš„ `material_url` å­—æ®µç›´æ¥å¼•ç”¨ç½‘ç»œèµ„æºURLï¼Œæ— éœ€å•ç‹¬çš„ MediaResource ç±»ï¼š
- åœ¨ Coze å·¥ä½œæµä¸­ï¼Œå„ segment ç›´æ¥ä½¿ç”¨ URL å¼•ç”¨åª’ä½“èµ„æº
- èµ„æºç±»å‹ä» segment ç±»å‹è‡ªåŠ¨æ¨æ–­ï¼ˆVideoSegment â†’ è§†é¢‘ï¼ŒAudioSegment â†’ éŸ³é¢‘ï¼Œç­‰ï¼‰
- åœ¨è‰ç¨¿ç”Ÿæˆå™¨ä¸­ï¼ŒURL è¢«ä¸‹è½½ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œç„¶åä¼ é€’ç»™ pyJianYingDraft çš„ Material ç±»ï¼ˆ`VideoMaterial(path)` æˆ– `AudioMaterial(path)`ï¼‰

### pyJianYingDraft æ®µç±»å‹å±‚æ¬¡ç»“æ„

ç†è§£ pyJianYingDraft çš„æ®µç±»å‹å±‚æ¬¡ç»“æ„å¯¹äºæ­£ç¡®ä½¿ç”¨ Draft Generator Interface è‡³å…³é‡è¦ï¼š

```
BaseSegment (åŸºç±»)
â”œâ”€â”€ MediaSegment (åª’ä½“ç‰‡æ®µåŸºç±» - ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„æ®µç±»å‹)
â”‚   â”œâ”€â”€ AudioSegment (éŸ³é¢‘ç‰‡æ®µ) âœ…
â”‚   â””â”€â”€ VisualSegment (è§†è§‰ç‰‡æ®µåŸºç±» - ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„æ®µç±»å‹)
â”‚       â”œâ”€â”€ VideoSegment (è§†é¢‘ç‰‡æ®µ - ä¹Ÿç”¨äºå›¾ç‰‡!) âœ…
â”‚       â”œâ”€â”€ TextSegment (æ–‡æœ¬/å­—å¹•ç‰‡æ®µ) âœ…
â”‚       â””â”€â”€ StickerSegment (è´´çº¸ç‰‡æ®µ) âœ…
â”œâ”€â”€ EffectSegment (ç‰¹æ•ˆç‰‡æ®µ - ç‹¬ç«‹è½¨é“) âœ…
â””â”€â”€ FilterSegment (æ»¤é•œç‰‡æ®µ - ç‹¬ç«‹è½¨é“) âœ…
```

**å…³é”®ç‚¹**:
1. `MediaSegment` å’Œ `VisualSegment` æ˜¯åŸºç±»ï¼Œä¸ç›´æ¥å®ä¾‹åŒ–
2. **å›¾ç‰‡åœ¨ pyJianYingDraft ä¸­ä½œä¸º `VideoSegment` å¤„ç†**ï¼ˆé™æ€è§†é¢‘ï¼‰
3. `EffectSegment` å’Œ `FilterSegment` æ”¾ç½®åœ¨ç‹¬ç«‹è½¨é“ä¸Š

### Draft Generator Interface æ®µé…ç½®ç±»æ˜ å°„

| é…ç½®ç±» | pyJianYingDraft ç±» | è¯´æ˜ |
|--------|-------------------|------|
| `VideoSegmentConfig` | `VideoSegment` | è§†é¢‘ç‰‡æ®µ |
| `AudioSegmentConfig` | `AudioSegment` | éŸ³é¢‘ç‰‡æ®µ |
| `ImageSegmentConfig` | `VideoSegment` | âš ï¸ å›¾ç‰‡ä½œä¸ºé™æ€è§†é¢‘å¤„ç† |
| `TextSegmentConfig` | `TextSegment` | æ–‡æœ¬/å­—å¹•ç‰‡æ®µ |
| `StickerSegmentConfig` | `StickerSegment` | è´´çº¸ç‰‡æ®µ |
| `EffectSegmentConfig` | `EffectSegment` | ç‰¹æ•ˆç‰‡æ®µï¼ˆç‹¬ç«‹è½¨é“ï¼‰|
| `FilterSegmentConfig` | `FilterSegment` | æ»¤é•œç‰‡æ®µï¼ˆç‹¬ç«‹è½¨é“ï¼‰|

### è½¨é“å’Œæ®µç±»å‹çš„ä¸¥æ ¼å¯¹åº”å…³ç³»

**å…³é”®åŸåˆ™**: pyJianYingDraft çš„ Track æ˜¯æ³›å‹ç±» `Track[Seg_type]`ï¼Œæ¯ç§è½¨é“ç±»å‹åªæ¥å—ä¸€ç§ç‰¹å®šçš„æ®µç±»å‹ã€‚

#### è½¨é“-æ®µç±»å‹æ˜ å°„è¡¨

| è½¨é“ç±»å‹ | pyJianYingDraft Track | æ¥å—çš„æ®µç±»å‹ | æœ¬é¡¹ç›®é…ç½®ç±» |
|---------|----------------------|------------|-------------|
| `video` | `Track[VideoSegment]` | VideoSegment | VideoSegmentConfig, ImageSegmentConfig |
| `audio` | `Track[AudioSegment]` | AudioSegment | AudioSegmentConfig |
| `text` | `Track[TextSegment]` | TextSegment | TextSegmentConfig |
| `sticker` | `Track[StickerSegment]` | StickerSegment | StickerSegmentConfig |
| `effect` | `Track[EffectSegment]` | EffectSegment | EffectSegmentConfig |
| `filter` | `Track[FilterSegment]` | FilterSegment | FilterSegmentConfig |

**é‡è¦è§„åˆ™**:
1. âŒ **æ²¡æœ‰ "image" è½¨é“ç±»å‹** - å›¾ç‰‡æ”¾åœ¨ video è½¨é“ä¸Š
2. âœ… video è½¨é“å¯ä»¥åŒæ—¶åŒ…å« VideoSegmentConfig å’Œ ImageSegmentConfig
3. âœ… å…¶ä»–è½¨é“åªèƒ½åŒ…å«å¯¹åº”çš„å•ä¸€æ®µç±»å‹
4. âœ… TrackConfig åŒ…å«è¿è¡Œæ—¶éªŒè¯ï¼Œç¡®ä¿æ®µç±»å‹ä¸è½¨é“ç±»å‹åŒ¹é…
5. âœ… effect å’Œ filter è½¨é“æ˜¯ç‹¬ç«‹è½¨é“

#### ä½¿ç”¨ç¤ºä¾‹

```python
# âœ… æ­£ç¡®: video è½¨é“åŒ…å«è§†é¢‘æ®µ
video_track = TrackConfig(
    track_type="video",
    segments=[VideoSegmentConfig(...)]
)

# âœ… æ­£ç¡®: video è½¨é“åŒ…å«å›¾ç‰‡æ®µ
video_track = TrackConfig(
    track_type="video",  # æ³¨æ„ï¼šä¸æ˜¯ "image"
    segments=[ImageSegmentConfig(...)]
)

# âœ… æ­£ç¡®: video è½¨é“æ··åˆè§†é¢‘å’Œå›¾ç‰‡
video_track = TrackConfig(
    track_type="video",
    segments=[VideoSegmentConfig(...), ImageSegmentConfig(...)]
)

# âŒ é”™è¯¯: "image" è½¨é“ç±»å‹ä¸å­˜åœ¨
image_track = TrackConfig(
    track_type="image",  # é”™è¯¯ï¼
    segments=[ImageSegmentConfig(...)]
)

# âŒ é”™è¯¯: audio è½¨é“ä¸èƒ½åŒ…å« video æ®µ
audio_track = TrackConfig(
    track_type="audio",
    segments=[VideoSegmentConfig(...)]  # é”™è¯¯ï¼
)
```

### å¸¸è§è¯¯è§£å’Œæ³¨æ„äº‹é¡¹

1. **è¯¯è§£**: ImageSegment æ˜¯ç‹¬ç«‹çš„æ®µç±»å‹ï¼Œæœ‰ç‹¬ç«‹çš„è½¨é“
   - **å®é™…**: pyJianYingDraft æ²¡æœ‰ ImageSegment å’Œ image è½¨é“ï¼Œå›¾ç‰‡ä½¿ç”¨ VideoSegment æ”¾åœ¨ video è½¨é“ä¸Š
   - **æœ¬é¡¹ç›®**: `ImageSegmentConfig` æä¾›ç®€åŒ–æ¥å£ï¼Œä½†å¿…é¡»æ”¾åœ¨ `track_type="video"` çš„è½¨é“ä¸Š

2. **è¯¯è§£**: æ‰€æœ‰æ®µç±»å‹éƒ½å¯ä»¥æ·»åŠ åˆ°åŒä¸€ä¸ªè½¨é“
   - **å®é™…**: æ¯ç§è½¨é“åªæ¥å—ç‰¹å®šçš„æ®µç±»å‹ï¼ŒpyJianYingDraft åœ¨è¿è¡Œæ—¶å¼ºåˆ¶éªŒè¯
   - **æœ¬é¡¹ç›®**: TrackConfig åŒ…å« `__post_init__` éªŒè¯ï¼Œä¼šåœ¨åˆ›å»ºæ—¶æ£€æŸ¥æ®µç±»å‹åŒ¹é…

3. **è¯¯è§£**: tracks åˆ—è¡¨å¿…é¡»åŒ…å«ç‰¹å®šæ•°é‡æˆ–ç±»å‹çš„è½¨é“
   - **å®é™…**: tracks æ˜¯çµæ´»çš„åˆ—è¡¨ï¼Œå¯ä»¥åŒ…å«ä»»æ„æ•°é‡å’Œç±»å‹çš„è½¨é“
   - **æœ¬é¡¹ç›®**: ç¤ºä¾‹å±•ç¤ºå¤šç§è½¨é“åªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå®é™…ä½¿ç”¨æ—¶æ ¹æ®éœ€è¦æ·»åŠ 

## å¼€å‘å†ç¨‹æ–‡æ¡£è§„èŒƒ

### DEVELOPMENT_ROADMAP.md ç¼–å†™è§„èŒƒ

å½“æ·»åŠ æ–°åŠŸèƒ½æˆ–è¿›è¡Œé‡è¦æ›´æ–°æ—¶ï¼Œå¿…é¡»åœ¨ `docs/guides/DEVELOPMENT_ROADMAP.md` ä¸­è®°å½•å¼€å‘è¿‡ç¨‹ã€‚éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

#### æ–‡æ¡£ç›®æ ‡
- å¸®åŠ©å¼€å‘è€…å’Œå­¦ä¹ è€…å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„
- è§£é‡Šæ¯ä¸ªåŠŸèƒ½å‡ºç°çš„åº”ç”¨èƒŒæ™¯å’ŒåŸå› 
- è®°å½•å…·ä½“çš„å®ç°æ–¹æ³•å’ŒæŠ€æœ¯å†³ç­–
- ä¿æŒç®€æ´åŠ¡å®ï¼Œé¿å…è¥é”€æ€§è¯­è¨€

#### å†…å®¹ç»“æ„
æ¯ä¸ªæ–°åŠŸèƒ½çš„è®°å½•åº”åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

```markdown
### N. åŠŸèƒ½åç§° - [Issue #X](é“¾æ¥), [PR #Y](é“¾æ¥)

**åº”ç”¨èƒŒæ™¯**: è¯´æ˜ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œè§£å†³ä»€ä¹ˆå®é™…é—®é¢˜

**å®ç°éœ€æ±‚**: (å¦‚æœå¤æ‚åŠŸèƒ½éœ€è¦)
- åˆ—å‡ºä¸»è¦çš„æŠ€æœ¯éœ€æ±‚
- è¯´æ˜çº¦æŸæ¡ä»¶å’ŒæŒ‘æˆ˜

**å…·ä½“åšæ³•**:
- è¯¦ç»†è¯´æ˜å®ç°æ–¹æ¡ˆ
- åˆ—å‡ºå…³é”®çš„æŠ€æœ¯ç»†èŠ‚
- åŒ…å«é‡è¦çš„ä»£ç ç»“æ„æˆ–APIè®¾è®¡
- è¯´æ˜å¦‚ä½•è§£å†³ä¸»è¦æŒ‘æˆ˜
```

#### ç¼–å†™åŸåˆ™
1. **é‡ç‚¹åœ¨äºæŠ€æœ¯å®ç°**: é‡ç‚¹è§£é‡Šåº”ç”¨èƒŒæ™¯ã€åŸå› å’Œå…·ä½“åšæ³•
2. **é“¾æ¥åˆ°å®é™…Issues/PRs**: å¿…é¡»åŒ…å«GitHub issueå’ŒPRçš„å®Œæ•´é“¾æ¥
3. **é¿å…æ—¶é—´çº¿è¥é”€**: ä¸å¼ºè°ƒ"ç¬¬å‡ é˜¶æ®µ"ã€"é‡Œç¨‹ç¢‘"ç­‰è¥é”€æ€§æè¿°
4. **ä¿æŒå®ç”¨æ€§**: ä¸“æ³¨äºå¸®åŠ©ç†è§£æ¶æ„å’ŒåŠŸèƒ½ï¼Œä¸åŒ…å«é¡¹ç›®å±•æœ›æˆ–æˆé•¿æ•°æ®
5. **æŒ‰å¼€å‘é¡ºåº**: æŒ‰ç…§åŠŸèƒ½å¼€å‘çš„å®é™…é¡ºåºè®°å½•ï¼Œä½“ç°ä¾èµ–å…³ç³»

#### ç¦æ­¢å†…å®¹
- é¿å…"ç¬¬ä¸€é˜¶æ®µ"ã€"æˆç†ŸåŒ–"ç­‰é˜¶æ®µæ€§æè¿°
- ä¸åŒ…å«"æ ¸å¿ƒæŠ€æœ¯æ¦‚å¿µæ¼”è¿›"ã€"è®¾è®¡å†³ç­–è®°å½•"ç­‰ç†è®ºæ€§ç« èŠ‚
- ä¸æ·»åŠ "é¡¹ç›®æˆé•¿æ•°æ®"ã€"æœªæ¥å±•æœ›"ç­‰å¸‚åœºåŒ–å†…å®¹
- å‡å°‘æ—¶é—´æˆ³å’Œæ—¥æœŸï¼Œé™¤éå¯¹ç†è§£æŠ€æœ¯æ¼”è¿›å¿…è¦

#### æ›´æ–°è¦æ±‚
- æ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½æ—¶å¿…é¡»æ›´æ–°æ­¤æ–‡æ¡£
- ä¿æŒæ–‡æ¡£ä¸å®é™…ä»£ç åŒæ­¥
- å®šæœŸæ£€æŸ¥é“¾æ¥æœ‰æ•ˆæ€§
- ç¡®ä¿æ–°å†…å®¹ç¬¦åˆæ—¢å®šæ ¼å¼

## ç›¸å…³èµ„æº

### Coze å¹³å°èµ„æº
- [Coze å¼€å‘è€…æ–‡æ¡£](https://www.coze.cn/open/docs/developer_guides)
- [Coze æ’ä»¶å¼€å‘æŒ‡å—](https://www.coze.cn/open/docs/developer_guides)
- [GitHub Copilot æœ€ä½³å®è·µ](https://gh.io/copilot-coding-agent-tips)

### pyJianYingDraft èµ„æº
- [pyJianYingDraft æ–‡æ¡£](https://github.com/GuanYixuan/pyJianYingDraft)
- [å‰ªæ˜ è‰ç¨¿æ ¼å¼è¯´æ˜](https://github.com/GuanYixuan/pyJianYingDraft/blob/main/README.md)

### é¡¹ç›®ç”Ÿæ€ç³»ç»Ÿ
- **Coze å·¥ä½œæµ**: AI é©±åŠ¨çš„å†…å®¹ç”Ÿæˆå’Œå‚æ•°é…ç½®
- **æœ¬é¡¹ç›® (Coze æ’ä»¶)**: å‚æ•°å¤„ç†å’Œ JSON æ•°æ®ç”Ÿæˆ
- **è‰ç¨¿ç”Ÿæˆå™¨** *(å ä½ç¬¦)*: JSON æ•°æ®è½¬æ¢ä¸ºå‰ªæ˜ è‰ç¨¿æ–‡ä»¶
- **å‰ªæ˜ **: æœ€ç»ˆçš„è§†é¢‘ç¼–è¾‘å’Œè¾“å‡º